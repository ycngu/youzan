webpackJsonp([3],{"0C+S":function(t,e){},NW8W:function(t,e){},TFhR:function(t,e,n){"use strict";var i={hotLists:"index/hotLists",banner:"index/banner",topList:"category/topList",subList:"category/subList",rank:"category/rank",searchList:"search/list",details:"goods/details",deal:"goods/deal",evaluation:"goods/evaluation",cartAdd:"cart/add",cartRemove:"cart/remove",cartMremove:"cart/mremove",cartReduce:"cart/reduce",cartLists:"cart/list",cartUpdate:"cart/update",addressLists:"address/list",addressAdd:"address/add",addressRemove:"address/remove",addressUpdate:"address/update",addressSetDefault:"address/setDefault"};for(var o in i)i.hasOwnProperty(o)&&(i[o]="https://www.easy-mock.com/mock/5c33439c0be8d31904699ad0/youzan/"+i[o]);e.a=i},"U/rD":function(t,e,n){"use strict";var i={filters:{currency:function(t){var e=""+t;if(e.indexOf(".")>-1){var n=e.split(".");return n[0]+"."+(n[1]+"0").substr(0,2)}return e+".00"}},components:{Foot:n("nq5D").a}};e.a=i},eC21:function(t,e){},gWPi:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("NW8W"),n("0C+S"),n("eC21");var i=n("7+uW"),o=n("mtWM"),s=n.n(o),r=n("TFhR"),c=n("U/rD"),a=n("9qgI"),d=n.n(a),u=n("Zrlr"),h=n.n(u),f=n("wxAW"),l=n.n(f),g=n("wI4f"),v=function(){function t(){h()(this,t)}return l()(t,null,[{key:"add",value:function(t){return g.a.post(r.a.cartAdd,{id:t,number:1})}},{key:"reduce",value:function(t){return g.a.post(r.a.cartReduce,{id:t,number:1})}}]),t}();new i.default({el:"#app",data:{lists:null,total:0,editingShop:null,editingShopIndex:-1,removePopup:!1,removeData:null,removeMsg:"",showInvalid:!0,clearCart:!1},created:function(){this.getLists()},computed:{allSelected:{get:function(){return!(!this.lists||!this.lists.length)&&this.lists.every(function(t){return t.checked})},set:function(t){this.lists.forEach(function(e){e.checked=t,e.goodsList.forEach(function(e){e.checked=t})})}},allRemoveSelected:{get:function(){return!!this.editingShop&&this.editingShop.removeChecked},set:function(t){return this.editingShop&&(this.editingShop.removeChecked=t,this.editingShop.goodsList.forEach(function(e){e.removeChecked=t})),!1}},selectLists:function(){if(this.lists&&this.lists.length){var t=[],e=0;return this.lists.forEach(function(n){n.goodsList.forEach(function(n){n.checked&&(t.push(n),e+=n.price*n.number)})}),this.total=e,t}return[]},removeLists:function(){if(this.editingShop){var t=[];return this.editingShop.goodsList.forEach(function(e){e.removeChecked&&t.push(e)}),t}return[]}},methods:{getLists:function(){var t=this;s.a.get(r.a.cartLists).then(function(e){var n=e.data.cartList;n.forEach(function(t){t.checked=!0,t.editing=!1,t.removeChecked=!1,t.editingMsg="编辑",t.goodsList.forEach(function(t){t.checked=!0,t.removeChecked=!1})}),t.lists=n})},selectGood:function(t,e){var n=this.editingShop?"removeChecked":"checked";e[n]=!e[n],t[n]=t.goodsList.every(function(t){return t[n]})},selectShop:function(t){var e=this.editingShop?"removeChecked":"checked";t[e]=!t[e],t.goodsList.forEach(function(n){n[e]=t[e]})},selectAll:function(){var t=this.editingShop?"allRemoveSelected":"allSelected";this[t]=!this[t]},edit:function(t,e){t.editing=!t.editing,t.editingMsg=t.editing?"完成":"编辑",this.lists.forEach(function(n,i){e!==i&&(n.editing=!1,n.editingMsg=t.editing?"":"编辑")}),this.editingShop=t.editing?t:null,this.editingShopIndex=t.editing?e:-1},add:function(t){v.add(t.id).then(function(e){t.number++})},reduce:function(t){1!==t.number&&v.reduce(t.id).then(function(e){t.number--})},remove:function(t,e,n,i){this.removePopup=!0,this.removeData={shop:t,shopIndex:e,good:n,goodIndex:i},this.removeMsg="确定要删除该商品吗?"},removeList:function(){this.removePopup=!0,this.removeMsg="确定将所选 "+this.removeLists.length+" 个商品删除？"},removeConfirm:function(){var t=this;if("确定要删除该商品吗?"===this.removeMsg){var e=this.removeData,n=e.shop,i=e.shopIndex,o=e.good,c=e.goodIndex;s.a.post(r.a.cartRemove,{id:o.id}).then(function(e){n.goodsList.splice(c,1),n.goodsList.length||(t.lists.splice(i,1),t.removeShop()),t.removePopup=!1})}else{var a=[];this.removeLists.forEach(function(t){a.push(t.id)}),s.a.post(r.a.cartMremove,{ids:a}).then(function(e){var n=[];t.editingShop.goodsList.forEach(function(e){-1===t.removeLists.findIndex(function(t){return t.id==e.id})&&n.push(e)}),n.length?t.editingShop.goodsList=n:(t.lists.splice(t.editingShopIndex,1),t.removeShop()),t.removePopup=!1})}},removeShop:function(){this.editingShop=null,this.editingShopIndex=-1,this.lists.forEach(function(t){t.editing=!1,t.editingMsg="编辑"})},clearcart:function(){this.clearCart=!0},clearConfirm:function(){this.clearCart=!1},start:function(t,e){e.startX=t.changedTouches[0].clientX},end:function(t,e,n,i){var o=t.changedTouches[0].clientX,s="0";n.startX-o>100&&(s="-60px"),o-n.startX>100&&(s="0px"),d()(this.$refs["goods-"+e+"-"+i],{left:s})},clearInvalid:function(){this.showInvalid=!1}},mixins:[c.a]})},moql:function(t,e){},nq5D:function(t,e,n){"use strict";var i=n("mw3O"),o=n.n(i).a.parse(location.search.substr(1)).index,s=[{name:"有赞",icon:"icon-home",href:"index.html"},{name:"分类",icon:"icon-category",href:"category.html"},{name:"购物车",icon:"icon-cart",href:"cart.html"},{name:"我",icon:"icon-user",href:"member.html"}],r={data:function(){return{navConfig:s,curIndex:parseInt(o)||0}},methods:{changeNav:function(t,e){location.href=t.href+"?index="+e}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bottom-nav"},[n("ul",t._l(t.navConfig,function(e,i){return n("li",{class:{active:i==t.curIndex},on:{click:function(n){t.changeNav(e,i)}}},[n("a",[n("i",{class:e.icon}),t._v(" "),n("div",[t._v(t._s(e.name))])])])}),0)])},staticRenderFns:[]};var a=n("VU/8")(r,c,!1,function(t){n("moql")},"data-v-4aace65f",null);e.a=a.exports},wI4f:function(t,e,n){"use strict";var i=n("//Fk"),o=n.n(i),s=n("mtWM"),r=n.n(s);e.a={get:function(t,e){return new o.a(function(n,i){r.a.get(t,e).then(function(t){t.data.status,n(t)}).catch(function(t){i(t)})})},post:function(t,e){return new o.a(function(n,i){r.a.post(t,e).then(function(t){t.data.status,n(t)}).catch(function(t){i(t)})})}}}},["gWPi"]);
//# sourceMappingURL=cart.5a72628dde921df6fb34.js.map